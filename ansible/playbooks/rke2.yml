- name: Base System
  hosts: nodes
  gather_facts: False
  roles:
    - name: setup base system requirements
      role: ../roles/rke2-host
      tags:
        - system

- name: Cluster configuration
  hosts: clusters
  gather_facts: False
  roles:
    - name: install kinds on rke2 cluster
      role: ../roles/rke2-cluster
      tags:
        - rke2-cluster

- name: Kuberbetes association
  hosts: nodes
  gather_facts: False
  roles:
    - name: setup rke2 cluster via rke2
      role: ../roles/rke2-join
      tags:
        - rke2
