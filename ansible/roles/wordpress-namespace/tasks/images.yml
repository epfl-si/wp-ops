# Kubernetes configuration for “cloud” builds
#
# Builds happen in a test namespace *only.* The images can then be consumed
# (through the same Quay instance) in both test and production namespaces.

- include_vars: image-vars.yml
  tags: always

- name: "Build Config Prerequisites"
  when: >-
    "openshift_namespaces_test" in group_names
  include_tasks:
    file: buildconfig-prerequisites.yml
    apply:
      tags:
        - images

- name: "ISAS-FSD Catalog"
  when: >-
    "openshift_namespaces_test" in group_names
  include_tasks:
    file: isas-fsd-catalog.yml
    apply:
      tags:
        - images.catalog
