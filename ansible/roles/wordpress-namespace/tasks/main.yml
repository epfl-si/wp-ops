---

- name: Log in to cluster
  tags: always
  import_tasks:
    file: k8s-login.yml

- name: MariaDB server
  include_tasks:
    file: mariadb.yml
    apply:
      tags:
        - wp
        - wp.mariadb
  tags:
    - wp
    - wp.mariadb

- name: Web server
  include_tasks:
    file: nginx.yml
    apply:
      tags:
        - wp
        - wp.web
  tags:
    - wp
    - wp.web

- name: Serving secrets (for plugins, outgoing SMTP etc.)
  include_tasks:
    file: secrets.yml
    apply:
      tags:
      - wp
      - wp.secrets
  tags:
    - wp
    - wp.secrets
